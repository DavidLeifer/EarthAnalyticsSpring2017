main="Lidar Digital Elevation Model (DEM)")
lidar_dsm <- raster(x="/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill/pre-flood/lidar/pre_DSM.tif")
plot(lidar_dsm,
main="Lidar Digital Surface Model (DSM)")
lidar_chm <- lidar_dsm - lidar_dem
lidar_chm <- lidar_dsm - lidar_dem
plot(lidar_chm,
main="Lidar Canopy Height Model (CHM)")
plot(lidar_chm,
breaks = c(0, 2, 10, 20, 30),
main="Lidar Canopy Height Model",
col=c("white","brown","springgreen","darkgreen"))
print("the directory exists!")
if (dir.exists("/home/kushgod/earth-analytics/week3/data/outputs")) {
print("the directory exists!")
} else {
# if the directory doesn't exist, create it
# recursive tells R to create the entire directory path (data/week3/outputs)
dir.create("data/week3/outputs", recursive=TRUE)
}
if (dir.exists("/home/kushgod/earth-analytics/week3/data/outputs")) {
print("the directory exists!")
} else {
# if the directory doesn't exist, create it
# recursive tells R to create the entire directory path (data/week3/outputs)
dir.create("/data/outputs", recursive=TRUE)
}
dir.create("/home/kushgod/earth-analytics/week3/data/outputs", recursive=TRUE)
writeRaster(lidar_chm, "/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tiff",
format="GTiff",  # output format = GeoTIFF
overwrite=TRUE) # CAUTION: if this is true, it will overwrite an existing file
pre_dsm <- raster(x="/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill/pre-flood/lidar/pre_DSM.tif")
post_dsm <- raster(x="/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill/post-flood/lidar/post_DSM.tif")
sub <- post_dsm - pre_dsm
sub <- post_dsm - pre_dsm
plot(sub,
main="Cut and Fill Analysis")
sub <- pre_dsm - post_dsm
plot(sub,
main="Cut and Fill Analysis DSM")
writeRaster(sub, "/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tiff",
format="GTiff",  # output format = GeoTIFF
overwrite=TRUE)
writeRaster(sub, "/home/kushgod/earth-analytics/week3/data/outputs/DEM_sub.tiff",
format="GTiff",  # output format = GeoTIFF
overwrite=TRUE)
library(raster)
library(rgdal)
library(raster)
library(rgdal)
# create classification matrix
reclass_df <- c(0, 10, 1,
10, 20, 2,
20, 35, 3)
reclass_df
## [1]  0 10  1 10 20  2 20 35  3
# reshape the object into a matrix with columns and rows
reclass_m <- matrix(reclass_df,
ncol=3,
byrow=TRUE)
reclass_m
##      [,1] [,2] [,3]
## [1,]    0   10    1
## [2,]   10   20    2
## [3,]   20   35    3
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs
/lidar_chm.tif")
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill/outputs
/lidar_chm.tif")
lidar_chm <- raster("/Home/earth-analytics/week3/data/outputs/lidar_chm.tif")
writeRaster(lidar_chm, "/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tiff",
format="GTiff",  # output format = GeoTIFF
overwrite=TRUE) # CAUTION: if this is true, it will overwrite an existing file
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tiff")
library(raster)
library(rgdal)
setwd("/home/kushgod/earth-analytics/week3/")
# open raster data
lidar_dem <- raster(x="/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill/pre-flood/lidar/pre_DTM.tif")
# plot raster data
plot(lidar_dem,
main="Lidar Digital Elevation Model (DEM)")
# open raster data
lidar_dsm <- raster(x="/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill/pre-flood/lidar/pre_DSM.tif")
# plot raster data
plot(lidar_dsm,
main="Lidar Digital Surface Model (DSM)")
# open raster data
lidar_chm <- lidar_dsm - lidar_dem
# plot raster data
plot(lidar_chm,
main="Lidar Canopy Height Model (CHM)")
# plot raster data
plot(lidar_chm,
breaks = c(0, 2, 10, 20, 30),
main="Lidar Canopy Height Model",
col=c("white","brown","springgreen","darkgreen"))
# check to see if an output directory exists
dir.exists("/week3/data/outputs")
## [1] TRUE
# if the output directory doesn't exist, create it
if (dir.exists("/home/kushgod/earth-analytics/week3/data/outputs")) {
print("the directory exists!")
} else {
# if the directory doesn't exist, create it
# recursive tells R to create the entire directory path (data/week3/outputs)
dir.create("/home/kushgod/earth-analytics/week3/data/outputs", recursive=TRUE)
}
## [1] "the directory exists!"
# export CHM object to new GeotIFF
writeRaster(lidar_chm, "/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tiff",
format="GTiff",  # output format = GeoTIFF
overwrite=TRUE) # CAUTION: if this is true, it will overwrite an existing file
#CHALLENGE: subtract pre from post DEM
#pre
pre_dsm <- raster(x="/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill/pre-flood/lidar/pre_DSM.tif")
#post
post_dsm <- raster(x="/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill/post-flood/lidar/post_DSM.tif")
sub <- pre_dsm - post_dsm
plot(sub,
main="Cut and Fill Analysis DEM")
writeRaster(sub, "/home/kushgod/earth-analytics/week3/data/outputs/DEM_sub.tiff",
format="GTiff",  # output format = GeoTIFF
overwrite=TRUE)
library(raster)
library(rgdal)
# create classification matrix
reclass_df <- c(0, 10, 1,
10, 20, 2,
20, 35, 3)
reclass_df
## [1]  0 10  1 10 20  2 20 35  3
# reshape the object into a matrix with columns and rows
reclass_m <- matrix(reclass_df,
ncol=3,
byrow=TRUE)
reclass_m
# open canopy height model
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tiff")
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tif")
chm_classified <- reclassify(lidar_chm,
reclass_m)
plot(chm_classified,
col=c("red", "blue", "green"))
library(raster)
library(rgdal)
# create classification matrix
reclass_df <- c(0, 10, 1,
10, 20, 2,
20, 35, 3)
reclass_df
## [1]  0 10  1 10 20  2 20 35  3
# reshape the object into a matrix with columns and rows
reclass_m <- matrix(reclass_df,
ncol=3,
byrow=TRUE)
reclass_m
# open canopy height model
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tif")
# reclassify the raster using the reclass object - reclass_m
chm_classified <- reclassify(lidar_chm,
reclass_m)
# plot reclassified data
plot(chm_classified,
col=c("red", "blue", "green"))
# plot reclassified data
plot(chm_classified,
legend=F,
col=c("red", "blue", "green"), axes=F,
main="Canopy Height Model - Classified: short, medium, tall trees")
legend("topright",
legend = c("short trees", "medium trees", "tall trees"),
fill = c("red", "blue", "green"),
border = F,
bty="n") # turn off legend border
legend("right",
legend = c("short trees", "medium trees", "tall trees"),
fill = c("red", "blue", "green"),
border = F,
bty="n") # turn off legend border
library(raster)
library(rgdal)
# create classification matrix
reclass_df <- c(0, 10, 1,
10, 20, 2,
20, 35, 3)
reclass_df
## [1]  0 10  1 10 20  2 20 35  3
# reshape the object into a matrix with columns and rows
reclass_m <- matrix(reclass_df,
ncol=3,
byrow=TRUE)
reclass_m
# open canopy height model
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tif")
# reclassify the raster using the reclass object - reclass_m
chm_classified <- reclassify(lidar_chm,
reclass_m)
# plot reclassified data
plot(chm_classified,
col=c("red", "blue", "green"))
# plot reclassified data
plot(chm_classified,
legend=F,
col=c("red", "blue", "green"), axes=F,
main="Canopy Height Model - Classified: short, medium, tall trees")
legend("right",
legend = c("short trees", "medium trees", "tall trees"),
fill = c("red", "blue", "green"),
border = F,
bty="n") # turn off legend border
legend("top",
legend = c("short trees", "medium trees", "tall trees"),
fill = c("red", "blue", "green"),
border = F,
bty="n") # turn off legend border
library(raster)
library(rgdal)
# create classification matrix
reclass_df <- c(0, 10, 1,
10, 20, 2,
20, 35, 3)
reclass_df
## [1]  0 10  1 10 20  2 20 35  3
# reshape the object into a matrix with columns and rows
reclass_m <- matrix(reclass_df,
ncol=3,
byrow=TRUE)
reclass_m
# open canopy height model
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tif")
# reclassify the raster using the reclass object - reclass_m
chm_classified <- reclassify(lidar_chm,
reclass_m)
# plot reclassified data
plot(chm_classified,
col=c("red", "blue", "green"))
# plot reclassified data
plot(chm_classified,
legend=F,
col=c("red", "blue", "green"), axes=F,
main="Canopy Height Model - Classified: short, medium, tall trees")
legend("top",
legend = c("short trees", "medium trees", "tall trees"),
fill = c("red", "blue", "green"),
border = F,
bty="n") # turn off legend border
library(raster)
library(rgdal)
# create classification matrix
reclass_df <- c(0, 10, 1,
10, 20, 2,
20, 35, 3)
reclass_df
## [1]  0 10  1 10 20  2 20 35  3
# reshape the object into a matrix with columns and rows
reclass_m <- matrix(reclass_df,
ncol=3,
byrow=TRUE)
reclass_m
# open canopy height model
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tif")
# reclassify the raster using the reclass object - reclass_m
chm_classified <- reclassify(lidar_chm,
reclass_m)
# plot reclassified data
plot(chm_classified,
col=c("red", "blue", "green"))
# plot reclassified data
plot(chm_classified,
legend=F,
col=c("red", "blue", "green"), axes=F,
main="Canopy Height Model - Classified")
legend("right",
legend = c("short trees", "medium trees", "tall trees"),
fill = c("red", "blue", "green"),
border = F,
bty="n") # turn off legend border
library(raster)
library(rgdal)
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tif")
library(raster)
library(rgdal)
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tif")
# plot CHM
plot(lidar_chm,
col=rev(terrain.colors(50)))
library(raster)
library(rgdal)
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tif")
# plot CHM
plot(lidar_chm,
col=rev(terrain.colors(50)))
# import the vector boundary
crop_extent <- readOGR("/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill",
"clip-extent")
## OGR data source with driver: ESRI Shapefile
## Source: "data/week3/BLDR_LeeHill", layer: "clip-extent"
## with 1 features
## It has 1 fields
## Integer64 fields read as strings:  id
# plot imported shapefile
# notice that we use add=T to add a layer on top of an existing plot in R.
plot(crop_extent,
main="Shapefile imported into R - crop extent",
axes=T,
border="blue")
plot(lidar_chm_crop, main="Cropped lidar chm")
lidar_chm_crop <- crop(lidar_chm, crop_extent)
lidar_chm_crop <- crop(lidar_chm, crop_extent)
plot(lidar_chm_crop, main="Cropped lidar chm")
plot(crop_extent, add=T)
library(raster)
library(rgdal)
lidar_chm <- raster("/home/kushgod/earth-analytics/week3/data/outputs/lidar_chm.tif")
# plot CHM
plot(lidar_chm,
col=rev(terrain.colors(50)))
# import the vector boundary
crop_extent <- readOGR("/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill",
"clip-extent")
## OGR data source with driver: ESRI Shapefile
## Source: "data/week3/BLDR_LeeHill", layer: "clip-extent"
## with 1 features
## It has 1 fields
## Integer64 fields read as strings:  id
# plot imported shapefile
# notice that we use add=T to add a layer on top of an existing plot in R.
plot(crop_extent,
main="Shapefile imported into R - crop extent",
axes=T,
border="blue")
# crop the lidar raster using the vector extent
lidar_chm_crop <- crop(lidar_chm, crop_extent)
plot(lidar_chm_crop, main="Cropped lidar chm")
# add shapefile on top of the existing raster
plot(crop_extent, add=T)
![alt text](/home/kushgod/earth-analytics/week3/ramen.jpeg)
!['alt text'](/home/kushgod/earth-analytics/week3/ramen.jpeg)
install.packages('devtools')
devtools::install_github("dkahle/ggmap")
install.packages('maps')
library(ggmap)
myMap <- get_map(location = "Boulder, Colorado",
source="google",
maptype="terrain", crop=FALSE,
zoom=6)
## Source : https://maps.googleapis.com/maps/api/staticmap?center=Boulder,+Colorado&zoom=6&size=640x640&scale=2&maptype=terrain&language=en-EN
## Source : https://maps.googleapis.com/maps/api/geocode/json?address=Boulder%2C%20Colorado
# plot map
ggmap(myMap)
library(ggmap)
myMap <- get_map(location = "Boulder, Colorado",
source="google",
maptype="terrain", crop=FALSE,
zoom=6)
## Source : https://maps.googleapis.com/maps/api/staticmap?center=Boulder,+Colorado&zoom=6&size=640x640&scale=2&maptype=terrain&language=en-EN
## Source : https://maps.googleapis.com/maps/api/geocode/json?address=Boulder%2C%20Colorado
# plot map
ggmap(myMap)
# add points to your map
# creating a sample data.frame with your lat/lon points
lon <- c(-105.178333)
lat <- c(40.051667)
df <- as.data.frame(cbind(lon,lat))
# create a map with a point location for boulder.
ggmap(myMap) + labs(x = "", y = "") +
geom_point(data = df, aes(x = lon, y = lat, fill = "red", alpha = 0.2), size = 5, shape = 19) +
guides(fill=FALSE, alpha=FALSE, size=FALSE)
library(maps)
map('state')
title('Map of the United States')
library(ggmap)
myMap <- get_map(location = "Boulder, Colorado",
source="google",
maptype="terrain", crop=FALSE,
zoom=6)
## Source : https://maps.googleapis.com/maps/api/staticmap?center=Boulder,+Colorado&zoom=6&size=640x640&scale=2&maptype=terrain&language=en-EN
## Source : https://maps.googleapis.com/maps/api/geocode/json?address=Boulder%2C%20Colorado
# plot map
ggmap(myMap)
# add points to your map
# creating a sample data.frame with your lat/lon points
lon <- c(-105.178333)
lat <- c(40.051667)
df <- as.data.frame(cbind(lon,lat))
# create a map with a point location for boulder.
ggmap(myMap) + labs(x = "", y = "") +
geom_point(data = df, aes(x = lon, y = lat, fill = "red", alpha = 0.2), size = 5, shape = 19) +
guides(fill=FALSE, alpha=FALSE, size=FALSE)
#alt map
library(maps)
map('state')
# add a title to your map
title('Map of the United States')
library(ggmap)
myMap <- get_map(location = "Boulder, Colorado",
source="google",
maptype="terrain", crop=FALSE,
zoom=6)
## Source : https://maps.googleapis.com/maps/api/staticmap?center=Boulder,+Colorado&zoom=6&size=640x640&scale=2&maptype=terrain&language=en-EN
## Source : https://maps.googleapis.com/maps/api/geocode/json?address=Boulder%2C%20Colorado
# plot map
ggmap(myMap)
# add points to your map
# creating a sample data.frame with your lat/lon points
lon <- c(-105.178333)
lat <- c(40.051667)
df <- as.data.frame(cbind(lon,lat))
# create a map with a point location for boulder.
ggmap(myMap) + labs(x = "", y = "") +
geom_point(data = df, aes(x = lon, y = lat, fill = "red", alpha = 0.2), size = 5, shape = 19) +
guides(fill=FALSE, alpha=FALSE, size=FALSE)
#alt maps
library(maps)
map('state')
# add a title to your map
title('Map of the United States')
map('state', col="darkgray", fill=TRUE, border="white")
# add a title to your map
title('Map of the United States')
library(ggmap)
myMap <- get_map(location = "Boulder, Colorado",
source="google",
maptype="terrain", crop=FALSE,
zoom=6)
## Source : https://maps.googleapis.com/maps/api/staticmap?center=Boulder,+Colorado&zoom=6&size=640x640&scale=2&maptype=terrain&language=en-EN
## Source : https://maps.googleapis.com/maps/api/geocode/json?address=Boulder%2C%20Colorado
# plot map
ggmap(myMap)
# add points to your map
# creating a sample data.frame with your lat/lon points
lon <- c(-105.178333)
lat <- c(40.051667)
df <- as.data.frame(cbind(lon,lat))
# create a map with a point location for boulder.
ggmap(myMap) + labs(x = "", y = "") +
geom_point(data = df, aes(x = lon, y = lat, fill = "red", alpha = 0.2), size = 5, shape = 19) +
guides(fill=FALSE, alpha=FALSE, size=FALSE)
#alt maps
library(maps)
map('state')
# add a title to your map
title('Map of the United States')
map('state', col="darkgray", fill=TRUE, border="white")
# add a title to your map
title('Map of the United States')
map('county', regions="Colorado", col="darkgray", fill=TRUE, border="grey80")
map('state', regions="Colorado", col="black", add=T)
# add the x, y location of the stream guage using the points
# notice i used two colors adn sized to may the symbol look a little brighter
points(x=-105.178333, y=40.051667, pch=21, col="violetred4", cex=2)
points(x=-105.178333, y=40.051667, pch=8, col="white", cex=1.3)
# add a title to your map
title('County Map of Colorado\nStream gage location')
library(ggmap)
myMap <- get_map(location = "Boulder, Colorado",
source="google",
maptype="terrain", crop=FALSE,
zoom=6)
## Source : https://maps.googleapis.com/maps/api/staticmap?center=Boulder,+Colorado&zoom=6&size=640x640&scale=2&maptype=terrain&language=en-EN
## Source : https://maps.googleapis.com/maps/api/geocode/json?address=Boulder%2C%20Colorado
# plot map
ggmap(myMap)
# add points to your map
# creating a sample data.frame with your lat/lon points
lon <- c(-105.178333)
lat <- c(40.051667)
df <- as.data.frame(cbind(lon,lat))
# create a map with a point location for boulder.
ggmap(myMap) + labs(x = "", y = "") +
geom_point(data = df, aes(x = lon, y = lat, fill = "red", alpha = 0.2), size = 5, shape = 19) +
guides(fill=FALSE, alpha=FALSE, size=FALSE)
#alt maps
library(maps)
map('state')
# add a title to your map
title('Map of the United States')
map('state', col="darkgray", fill=TRUE, border="white")
# add a title to your map
title('Map of the United States')
map('county', regions="Colorado", col="darkgray", fill=TRUE, border="grey80")
map('state', regions="Colorado", col="black", add=T)
# add the x, y location of the stream guage using the points
# notice i used two colors adn sized to may the symbol look a little brighter
points(x=-105.178333, y=40.051667, pch=21, col="violetred4", cex=2)
points(x=-105.178333, y=40.051667, pch=8, col="white", cex=1.3)
# add a title to your map
title('County Map of Colorado\nStream gage location')
map('state', fill=TRUE, col="darkgray", border="white", lwd=1)
map(database = "usa", lwd=1, add=T)
# add the adjacent parts of the US; can't forget my homeland
map("state","colorado", col="springgreen",
lwd=1, fill=TRUE, add=TRUE)
# add gage location
title("Stream gage location\nBoulder, Colorado")
# add the x, y location of hte stream guage using the points
points(x=-105.178333, y=40.051667, pch=8, col="red", cex=1.3)
library(raster)
library(rgdal)
# open raster DTM data
lidar_dem <- raster(x="/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill/pre-flood/lidar/pre_DTM.tif")
# open dem hillshade
lidar_dem_hill <- raster(x="/home/kushgod/earth-analytics/week3/data/BLDR_LeeHill/pre-flood/lidar/pre_DTM_hill.tif")
# plot raster data
plot(lidar_dem_hill,
main="Lidar Digital Elevation Model (DEM)\n overlayed on top of a hillshade",
col=grey(1:100/100),
legend=F)
plot(lidar_dem,
main="Lidar Digital Elevation Model (DEM)",
add=T, alpha=.5)
